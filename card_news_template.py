#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
é£ä¹¦å¡ç‰‡å¼æ–°é—»æ¨¡æ¿
"""

import requests
import json

def get_card_news_template():
    """
    è¿”å›é£ä¹¦å¡ç‰‡å¼æ–°é—»æ¨¡æ¿
    """
    card_template = {
        "msg_type": "interactive",
        "card": {
            "config": {
                "wide_screen_mode": True,
                "enable_forward": True
            },
            "header": {
                "template": "blue",
                "title": {
                    "content": "ğŸŒ æ¯æ—¥å…¨çƒæƒ…æŠ¥ä¸é‡‘èåˆ†ææŠ¥å‘Š",
                    "tag": "plain_text"
                }
            },
            "elements": [
                {
                    "tag": "div",
                    "fields": [
                        {
                            "is_short": False,
                            "text": {
                                "content": "**ğŸ”¥ çƒ­åº¦æŒ‡æ•°**: ğŸ”¥+8\n**æ ‡é¢˜**: å…¨çƒAIèŠ¯ç‰‡éœ€æ±‚æ¿€å¢ï¼Œå°ç§¯ç”µè®¢å•çˆ†æ»¡\n**æ¥æº**: ç§‘æŠ€æ—¥æŠ¥",
                                "tag": "lark_md"
                            }
                        }
                    ]
                },
                {
                    "tag": "div",
                    "text": {
                        "content": "**æ ¸å¿ƒäº‹å®**: å°ç§¯ç”µAIèŠ¯ç‰‡è®¢å•å¢é•¿è¶…è¿‡200%ï¼Œäº§èƒ½ä¸¥é‡ä¸è¶³ï¼Œå¤šå®¶ç§‘æŠ€å·¨å¤´æ’é˜Ÿç­‰å¾…ä¾›è´§ã€‚",
                        "tag": "lark_md"
                    }
                },
                {
                    "tag": "hr"
                },
                {
                    "tag": "div",
                    "text": {
                        "content": "**ğŸ“Š æ·±åº¦ç ”æŠ¥**\nğŸ‡¨ğŸ‡³ **å¯¹ä¸­å›½çŸ­æœŸå½±å“**: å¯èƒ½åŠ å‰§èŠ¯ç‰‡ä¾›åº”ç´§å¼ å±€é¢ï¼Œæ¨åŠ¨å›½äº§æ›¿ä»£è¿›ç¨‹åŠ é€Ÿã€‚\nğŸ”® **å¯¹ä¸­å›½é•¿æœŸå½±å“**: å€’é€¼å›½å†…åŠå¯¼ä½“äº§ä¸šé“¾å‡çº§ï¼ŒåŠ é€Ÿè‡ªä¸»å¯æ§è¿›ç¨‹ã€‚\nğŸ“ˆ **è‚¡å¸‚å½±å“ (Aè‚¡/æ¸¯è‚¡/ç¾è‚¡)**:\n  * **åˆ©å¥½/åˆ©ç©ºæ¿å—**: åˆ©å¥½åŠå¯¼ä½“è®¾å¤‡ã€ææ–™è‚¡ï¼Œä¼ ç»ŸèŠ¯ç‰‡è®¾è®¡å…¬å¸æ‰¿å‹ã€‚\n  * **åº•å±‚é€»è¾‘**: AIéœ€æ±‚é©±åŠ¨èµ„æœ¬å¼€æ”¯å¢åŠ ï¼Œä¸Šæ¸¸è®¾å¤‡ææ–™ç‡å…ˆå—ç›Šã€‚",
                        "tag": "lark_md"
                    }
                },
                {
                    "tag": "action",
                    "actions": [
                        {
                            "tag": "button",
                            "text": {
                                "content": "ğŸ”— ç‚¹å‡»ç›´è¾¾",
                                "tag": "plain_text"
                            },
                            "url": "https://example.com/news1",
                            "type": "default"
                        }
                    ]
                },
                {
                    "tag": "div",
                    "fields": [
                        {
                            "is_short": False,
                            "text": {
                                "content": "**ğŸ”¥ çƒ­åº¦æŒ‡æ•°**: ğŸ”¥+6\n**æ ‡é¢˜**: å¤®è¡Œå®£å¸ƒé™å‡†0.25ä¸ªç™¾åˆ†ç‚¹åˆºæ¿€ç»æµ\n**æ¥æº**: é‡‘èæ—¶æŠ¥",
                                "tag": "lark_md"
                            }
                        }
                    ]
                },
                {
                    "tag": "div",
                    "text": {
                        "content": "**æ ¸å¿ƒäº‹å®**: ä¸­å›½äººæ°‘é“¶è¡Œæ„å¤–å®£å¸ƒé™å‡†é‡Šæ”¾æµåŠ¨æ€§ï¼Œé¢„è®¡å°†é‡Šæ”¾çº¦5000äº¿èµ„é‡‘ã€‚",
                        "tag": "lark_md"
                    }
                },
                {
                    "tag": "hr"
                },
                {
                    "tag": "div",
                    "text": {
                        "content": "**ğŸ“Š æ·±åº¦ç ”æŠ¥**\nğŸ‡¨ğŸ‡³ **å¯¹ä¸­å›½çŸ­æœŸå½±å“**: åˆ©å¥½è‚¡å¸‚å€ºå¸‚ï¼Œé™ä½èèµ„æˆæœ¬ï¼ŒææŒ¯å¸‚åœºä¿¡å¿ƒã€‚\nğŸ”® **å¯¹ä¸­å›½é•¿æœŸå½±å“**: è´§å¸æ”¿ç­–å®½æ¾å‘¨æœŸå¼€å¯ï¼Œæ”¯æŒå®ä½“ç»æµå‘å±•ã€‚\nğŸ“ˆ **è‚¡å¸‚å½±å“ (Aè‚¡/æ¸¯è‚¡/ç¾è‚¡)**:\n  * **åˆ©å¥½/åˆ©ç©ºæ¿å—**: é“¶è¡Œã€åœ°äº§ã€åŸºå»ºç­‰ä½ä¼°å€¼æ¿å—å—ç›Šæ˜æ˜¾ã€‚\n  * **åº•å±‚é€»è¾‘**: æµåŠ¨æ€§æ”¹å–„æå‡é£é™©åå¥½ï¼Œä½ä¼°å€¼æ¿å—ä¿®å¤ç©ºé—´è¾ƒå¤§ã€‚",
                        "tag": "lark_md"
                    }
                },
                {
                    "tag": "action",
                    "actions": [
                        {
                            "tag": "button",
                            "text": {
                                "content": "ğŸ”— ç‚¹å‡»ç›´è¾¾",
                                "tag": "plain_text"
                            },
                            "url": "https://example.com/news2",
                            "type": "default"
                        }
                    ]
                },
                {
                    "tag": "div",
                    "fields": [
                        {
                            "is_short": False,
                            "text": {
                                "content": "**ğŸ”¥ çƒ­åº¦æŒ‡æ•°**: ğŸ”¥+4\n**æ ‡é¢˜**: ç‰¹æ–¯æ‹‰å‘å¸ƒæ–°ä¸€ä»£è‡ªåŠ¨é©¾é©¶èŠ¯ç‰‡\n**æ¥æº**: æ±½è½¦ç§‘æŠ€",
                                "tag": "lark_md"
                            }
                        }
                    ]
                },
                {
                    "tag": "div",
                    "text": {
                        "content": "**æ ¸å¿ƒäº‹å®**: FSDèŠ¯ç‰‡æ€§èƒ½æå‡10å€ï¼Œæˆæœ¬é™ä½30%ï¼Œå°†æ¨åŠ¨è‡ªåŠ¨é©¾é©¶å•†ä¸šåŒ–è¿›ç¨‹ã€‚",
                        "tag": "lark_md"
                    }
                },
                {
                    "tag": "hr"
                },
                {
                    "tag": "div",
                    "text": {
                        "content": "**ğŸ“Š æ·±åº¦ç ”æŠ¥**\nğŸ‡¨ğŸ‡³ **å¯¹ä¸­å›½çŸ­æœŸå½±å“**: æ¨åŠ¨æ™ºèƒ½é©¾é©¶æ¿å—ä¸Šæ¶¨ï¼Œå¼•å‘æ–°ä¸€è½®æŠ€æœ¯ç«èµ›ã€‚\nğŸ”® **å¯¹ä¸­å›½é•¿æœŸå½±å“**: åŠ é€Ÿè‡ªåŠ¨é©¾é©¶å•†ä¸šåŒ–è½åœ°ï¼Œé‡å¡‘å‡ºè¡Œç”Ÿæ€æ ¼å±€ã€‚\nğŸ“ˆ **è‚¡å¸‚å½±å“ (Aè‚¡/æ¸¯è‚¡/ç¾è‚¡)**:\n  * **åˆ©å¥½/åˆ©ç©ºæ¿å—**: è‡ªåŠ¨é©¾é©¶ã€æ¿€å…‰é›·è¾¾ã€é«˜ç²¾åº¦åœ°å›¾ç­‰ç›¸å…³æ¦‚å¿µã€‚\n  * **åº•å±‚é€»è¾‘**: æŠ€æœ¯çªç ´å¸¦åŠ¨äº§ä¸šé“¾ä»·å€¼é‡ä¼°ï¼Œå‚¬ç”Ÿæ–°å•†ä¸šæ¨¡å¼ã€‚",
                        "tag": "lark_md"
                    }
                },
                {
                    "tag": "action",
                    "actions": [
                        {
                            "tag": "button",
                            "text": {
                                "content": "ğŸ”— ç‚¹å‡»ç›´è¾¾",
                                "tag": "plain_text"
                            },
                            "url": "https://example.com/news3",
                            "type": "default"
                        }
                    ]
                }
            ]
        }
    }
    
    return card_template

def send_card_news_template():
    """
    å‘é€å¡ç‰‡å¼æ–°é—»æ¨¡æ¿åˆ°é£ä¹¦ç¾¤
    """
    webhook_url = "https://open.feishu.cn/open-apis/bot/v2/hook/5379d0cd-e7d6-41cf-9465-14956a56cf45"
    
    card_data = get_card_news_template()
    
    try:
        response = requests.post(webhook_url, json=card_data)
        
        if response.status_code == 200:
            result = response.json()
            if result.get("StatusCode") == 0 or result.get("code") == 0:
                print("âœ… å¡ç‰‡å¼æ–°é—»æ¨¡æ¿å·²æˆåŠŸå‘é€åˆ°é£ä¹¦ç¾¤ï¼")
                return True
            else:
                print(f"âŒ å‘é€å¤±è´¥ï¼Œå“åº”å†…å®¹: {result}")
                return False
        else:
            print(f"âŒ HTTPè¯·æ±‚å¤±è´¥ï¼ŒçŠ¶æ€ç : {response.status_code}, é”™è¯¯ä¿¡æ¯: {response.text}")
            return False
            
    except Exception as e:
        print(f"âŒ å‘é€è¿‡ç¨‹ä¸­å‘ç”Ÿå¼‚å¸¸: {str(e)}")
        return False

if __name__ == "__main__":
    print("æ­£åœ¨å‘é€å¡ç‰‡å¼æ–°é—»æ¨¡æ¿åˆ°é£ä¹¦ç¾¤...")
    success = send_card_news_template()
    if success:
        print("å¡ç‰‡å¼æ–°é—»æ¨¡æ¿å‘é€å®Œæˆï¼")
    else:
        print("å‘é€å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥æˆ–Webhookåœ°å€æ˜¯å¦æ­£ç¡®ã€‚")